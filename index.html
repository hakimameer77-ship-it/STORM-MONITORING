<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STORM-WATCH | Interactive Monitoring</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root { --primary: #ffae00; --accent: #00d2ff; --dark: #0b0e11; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: #050505; /* Gelap supaya kilat nampak jelas */
            color: #fff; 
            line-height: 1.6; 
            overflow-x: hidden; 
        }

        /* --- KESAN KILAT LATAR BELAKANG --- */
        #lightning-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Di belakang semua elemen */
            pointer-events: none;
        }

        /* --- HEADER --- */
        header { display: flex; justify-content: center; align-items: center; padding: 30px 5%; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px); }
        .logo { display: flex; align-items: center; gap: 10px; }
        .logo-box { background: var(--primary); width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
        .logo h1 { font-weight: 800; font-size: 28px; letter-spacing: -1px; }

        /* --- HERO SECTION --- */
        .hero { padding: 20px 5% 50px; }
        .hero-img { width: 100%; height: 500px; border-radius: 40px; object-fit: cover; box-shadow: 0 0 50px rgba(255,174,0,0.2); filter: brightness(0.8); }
        .hero-content { position: relative; margin-top: -150px; padding-left: 50px; color: white; text-shadow: 0 4px 15px rgba(0,0,0,1); }

        /* --- HOW IT WORKS (Transparent Cards) --- */
        .how-works { padding: 100px 5%; text-align: center; }
        .steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-top: 50px; }
        .step { background: rgba(255,255,255,0.05); padding: 40px; border-radius: 30px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .step img { width: 80px; margin-bottom: 20px; filter: invert(1); }

        /* --- MASTER WATCHER --- */
        .video-sec { padding: 100px 5%; text-align: center; }
        .glass-box { background: rgba(255,255,255,0.05); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); border-radius: 25px; padding: 30px; transition: 0.3s; }
        .glass-box:hover { background: rgba(255,255,255,0.1); transform: scale(1.05); }

        /* --- TRY IT OUT (Centered Interactive Demo) --- */
        .try-it { padding: 100px 5%; text-align: center; }
        .demo-container { max-width: 800px; margin: 40px auto 0; }
        .demo-card { 
            background: rgba(255,255,255,0.05); 
            border-radius: 40px; 
            padding: 50px; 
            cursor: pointer; 
            transition: 0.4s; 
            border: 2px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(15px);
        }
        .demo-card:hover { 
            border-color: var(--primary); 
            transform: translateY(-15px);
            box-shadow: 0 0 40px rgba(255,174,0,0.3);
        }
        .demo-preview-img {
            width: 100%;
            border-radius: 20px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* --- MISSION --- */
        .mission { padding: 100px 5%; text-align: center; }
        .line-box { height: 6px; background: rgba(255,255,255,0.1); margin: 50px auto; max-width: 800px; display: flex; justify-content: space-between; align-items: center; border-radius: 10px; }
        .dot { width: 24px; height: 24px; border-radius: 50%; background: var(--primary); box-shadow: 0 0 20px var(--primary); }

        /* --- MONITORING DASHBOARD --- */
        #monitoring { background: rgba(0,0,0,0.8); padding: 100px 5%; border-radius: 60px 60px 0 0; border-top: 1px solid var(--primary); }
        .stat-card { background: rgba(255,255,255,0.03); padding: 40px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); }
        .big-val { font-size: 3.5rem; font-weight: 800; color: var(--accent); text-shadow: 0 0 20px rgba(0,210,255,0.5); }
    </style>
</head>
<body>

    <canvas id="lightning-canvas"></canvas>

    <header>
        <div class="logo">
            <div class="logo-box"><i class="fas fa-bolt" style="color:white"></i></div>
            <h1>STORM<span style="color:var(--primary)">WATCH</span></h1>
        </div>
    </header>

    <section class="hero">
        <img src="https://images.unsplash.com/photo-1605721911519-3dfeb3be25e7?auto=format&fit=crop&w=1200" class="hero-img">
        <div class="hero-content">
            <h2 style="font-size: 4rem; font-weight:800">Storm Tracker</h2>
            <p style="font-size: 1.2rem; opacity: 0.8;">Live IoT Monitoring for UTHM Community</p>
        </div>
    </section>

    <section class="how-works">
        <h2 style="font-size: 2.5rem;">How It Works</h2>
        <div class="steps">
            <div class="step"><img src="https://cdn-icons-png.flaticon.com/512/2540/2540201.png"><h3>Connect Sensors</h3></div>
            <div class="step"><img src="https://cdn-icons-png.flaticon.com/512/2103/2103633.png"><h3>Cloud Analysis</h3></div>
            <div class="step"><img src="https://cdn-icons-png.flaticon.com/512/4230/4230756.png"><h3>Instant Alert</h3></div>
        </div>
    </section>

    <section class="video-sec">
        <h2 style="font-size:3rem; font-weight:800; margin-bottom:50px">A master watcher 24/7</h2>
        <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:30px">
            <div class="glass-box"><h3>Real-time Tracking</h3></div>
            <div class="glass-box"><h3>Early Warning</h3></div>
            <div class="glass-box"><h3>Data Analytics</h3></div>
        </div>
    </section>

    <section class="try-it">
        <h2 style="font-size: 2.5rem;">Try It Out</h2>
        <div class="demo-container">
            <div class="demo-card" onclick="document.getElementById('monitoring').scrollIntoView({behavior: 'smooth'})">
                <p style="color:var(--primary); font-weight:800; letter-spacing:2px;">• INTERACTIVE DEMO •</p>
                <img src="https://i.postimg.cc/44Yfyk6j/dashboard-preview.png" class="demo-preview-img" alt="Dashboard">
                <h3 style="font-size:1.8rem;">Access Live Dashboard</h3>
                <p style="opacity:0.6; margin-top:15px;">Click to view live strike distance and status feed.</p>
            </div>
        </div>
    </section>

    <section class="mission">
        <h2 style="opacity:0.5; margin-bottom:20px;">Our Mission</h2>
        <div class="line-box">
            <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
        <p style="font-size:1.5rem;">Protecting the communities that sustain our world</p>
    </section>

    <section id="monitoring">
        <h2 style="margin-bottom:50px; text-align:center;">Real-Time System Feed</h2>
        <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:30px">
            <div class="stat-card"><h3>Distance</h3><div id="d-val" class="big-val">--</div><p>KM</p></div>
            <div class="stat-card"><h3>Status</h3><div id="s-val" class="big-val">WAIT</div></div>
            <div class="stat-card"><h3>Node ID</h3><div class="big-val" style="font-size:1.5rem">AMEER-083</div></div>
        </div>
        <div style="margin-top:50px; background:rgba(255,255,255,0.02); padding:40px; border-radius:40px; border: 1px solid rgba(255,255,255,0.05);">
            <canvas id="stormChart" height="120"></canvas>
        </div>
    </section>

    <script>
        // --- ANIMASI KILAT (LATAR BELAKANG) ---
        const canvas = document.getElementById('lightning-canvas');
        const ctxL = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        function drawLightning() {
            ctxL.clearRect(0, 0, canvas.width, canvas.height);
            if (Math.random() > 0.96) { // Kekerapan kilat muncul
                ctxL.strokeStyle = 'rgba(255, 255, 255, ' + Math.random() + ')';
                ctxL.lineWidth = 2;
                ctxL.beginPath();
                let x = Math.random() * canvas.width;
                ctxL.moveTo(x, 0);
                for (let i = 0; i < 20; i++) {
                    x += (Math.random() - 0.5) * 50;
                    ctxL.lineTo(x, (canvas.height / 20) * i);
                }
                ctxL.stroke();
                // Kesan Flash
                ctxL.fillStyle = 'rgba(255, 255, 255, 0.03)';
                ctxL.fillRect(0, 0, canvas.width, canvas.height);
            }
            requestAnimationFrame(drawLightning);
        }
        drawLightning();

        // --- BLYNK DATA UPDATE ---
        const TOKEN = "pd3Q6apyv8yfY9lmqOu_9IF8Gy3ldLpd"; 
        const ctx = document.getElementById('stormChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: { 
                labels: [], 
                datasets: [{ 
                    label: 'Distance (KM)', 
                    data: [], 
                    borderColor: '#00d2ff', 
                    backgroundColor: 'rgba(0,210,255,0.1)',
                    fill: true, 
                    tension: 0.4 
                }] 
            },
            options: { scales: { y: { beginAtZero: true, max: 40, grid: {color: '#222'} }, x: { grid: {color: '#222'} } } }
        });

        async function update() {
            try {
                const res1 = await fetch(`https://blynk.cloud/external/api/get?token=${TOKEN}&V1`);
                const res2 = await fetch(`https://blynk.cloud/external/api/get?token=${TOKEN}&V2`);
                const d = await res1.text();
                const s = await res2.text();
                document.getElementById('d-val').innerText = d;
                document.getElementById('s-val').innerText = s;
                if (chart.data.labels.length > 10) { chart.data.labels.shift(); chart.data.datasets[0].data.shift(); }
                chart.data.labels.push(new Date().toLocaleTimeString());
                chart.data.datasets[0].data.push(d);
                chart.update();
            } catch(e) {}
        }
        setInterval(update, 3000);
    </script>
</body>
</html>
